- 基于口令的安全验证
#### 流程:
> 1> 客户端发起连接请求
> 2> 远程主机收到用户的登录请求，把自己的公钥发给客户端
> 3> 客户端接收远程主机的公钥，然后使用远程主机的公钥加密登录密码，紧接着将加密后的登录密码连同自己的公钥一并发送给远程主机
> 4> 远程主机接收客户端的公钥及加密后的登录密码，用自己的私钥解密收到的登录密码，如果密码正确则允许登录，到此为止双方彼此拥有了对方的公钥，开始双向加密解密
#### PS:
> 当网络中有另一台冒牌服务器冒充远程主机时，客户端的连接请求被服务器B拦截，服务器B将自己的公钥发送给客户端，客户端就会将密码加密后发送给冒牌服务器，冒牌服务器就可以拿自己的私钥获取到密码，然后为所欲为。因此当第一次链接远程主机时，在上述步骤的第（3）步中，会提示您当前远程主机的”公钥指纹”，以确认远程主机是否是正版的远程主机，如果选择继续后就可以输入密码进行登录了，当远程的主机接受以后，该台服务器的公钥就会保存到 ~/.ssh/known_hosts文件中。

- 基于密匙的安全验证
#### 流程:
> 这种方式你需要在当前用户家目录下为自己创建一对密匙，并把公匙放在需要登录的服务器上。当你要连接到服务器上时，客户端就会向服务器请求使用密匙进行安全验证。服务器收到请求之后，会在该服务器上你所请求登录的用户的家目录下寻找你的公匙，然后与你发送过来的公匙进行比较。如果两个密匙一致，服务器就用该公匙加密“质询”并把它发送给客户端。客户端收到“质询”之后用自己的私匙解密再把它发送给服务器。与第一种级别相比，第二种级别不需要在网络上传送口令。
#### PS:
> 简单来说，就是将客户端的公钥放到服务器上，那么客户端就可以免密码登录服务器了，那么客户端的公钥应该放到服务器上哪个地方呢？默认为你要登录的用户的家目录下的 .ssh 目录下的 authorized_keys 文件中（即：~/.ssh/authorized_keys）。
#### 步骤:
> 客户机(登录机): ssh-keygen -t rsa
> 服务机(被登录机): cat /root/.ssh/id_rsa.pub >> /root/.ssh/authorized_keys

---

- ssh: 是openssh套件中的客户端连接工具，可以给予ssh加密协议实现安全的远程登录服务器
#### 语法:
ssh(选项)(参数)

#### 选项:
```
-1：强制使用ssh协议版本1<br>
-2：强制使用ssh协议版本2<br>
-4：强制使用IPv4地址<br>
-6：强制使用IPv6地址<br>
-A：开启认证代理连接转发功能<br>
-a：关闭认证代理连接转发功能<br>
-b：使用本机指定地址作为对应连接的源ip地址<br>
-C：请求压缩所有数据<br>
-F：指定ssh指令的配置文件<br>
-f：后台执行ssh指令<br>
-g：允许远程主机连接主机的转发端口<br>
-i：指定身份文件<br>
-l：指定连接远程服务器登录用户名<br>
-N：不执行远程指令<br>
-o：指定配置选项<br>
-p：指定远程服务器上的端口<br>
-q：静默模式<br>
-X：开启X11转发功能<br>
-x：关闭X11转发功能<br>
-y：开启信任X11转发功能<br>
```

- ssh-keygen: 用于为“ssh”生成、管理和转换认证密钥，它支持RSA和DSA两种认证密钥
#### 语法:
ssh-keygen(选项)

#### 选项:
```
-b：指定密钥长度<br>
-e：读取openssh的私钥或者公钥文件<br>
-C：添加注释<br>
-f：指定用来保存密钥的文件名<br>
-i：读取未加密的ssh-v2兼容的私钥/公钥文件，然后在标准输出设备上显示openssh兼容的私钥/公钥<br>
-l：显示公钥文件的指纹数据<br>
-N：提供一个新密语<br>
-P：提供（旧）密语<br>
-q：静默模式<br>
-t：指定要创建的密钥类型
```

- ssh-agent: 是一种控制用来保存公钥身份验证所使用的私钥的程序。ssh-agent在X会话或登录会话之初启动，所有其他窗口或程序则以客户端程序的身份启动并加入到ssh-agent程序中。通过使用环境变量，可定位代理并在登录到其他使用ssh机器上时使用代理自动进行身份验证
#### 语法:
ssh-agent [-c | -s] [-d] [-a bind_address] [-t life] [command [arg ...]] <br>
ssh-agent [-c | -s] -k

#### 选项:
```
-a bind_address：bind the agent to the UNIX-domain socket bind_address<br>
-c：生成C-shell风格的命令输出<br>
-d：调试模式<br>
-k：把ssh-agent进程杀掉<br>
-s：生成Bourne shell 风格的命令输出<br>
-t life：设置默认值添加到代理人的身份最大寿命
```

- ssh-add: 把专用密钥添加到ssh-agent的高速缓存中
#### 语法:
ssh-add [-cDdLlXx] [-t life] [file ...] <br>
ssh-add -s pkcs11 ssh-add -e pkcs11

#### 选项:
```
-D：删除ssh-agent中的所有密钥<br>
-d：从ssh-agent中的删除密钥<br>
-e pkcs11：删除PKCS#11共享库pkcs1提供的钥匙<br>
-s pkcs11：添加PKCS#11共享库pkcs1提供的钥匙<br>
-L：显示ssh-agent中的公钥 <br>
-l：显示ssh-agent中的密钥 <br>
-t life：对加载的密钥设置超时时间，超时ssh-agent将自动卸载密钥 <br>
-X：对ssh-agent进行解锁 <br>
-x：对ssh-agent进行加锁
```

#### 实例:
1. 把专用密钥添加到 ssh-agent 的高速缓存中： ssh-add ~/.ssh/id_dsa
2. 从ssh-agent中删除密钥： ssh-add -d ~/.ssh/id_xxx.pub
3. 查看ssh-agent中的密钥： ssh-add -l
